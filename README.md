# PageShare
The web app that allows you to write text and create time-limited links to it. The app includes both frontend and backend components.
## Enviroment variables
### ENV
> Based on this value, the configuration will load a specific .env file from the configuration folder.\
Available values: **production** (.env), **development** (.env.dev), **test** (.env.test)
### DB_URL
> URL of the database
### LOGS_PATH
> Path to the file for writing logs
## Testing - pytest
To run tests:
```bash
poetry run pytest
```
Automatically runs with ENV=test.\
Logs are cleared after each session.
## Logging - loguru
### Logger Midlleware
Generates a request ID that binds to the logger and attaches to each request for later use.\
Middleware logs every request, response, and server exception.
### Logger Depends
To access the logger from a request, use **get_logger()** or the **LoggerDepends** type from app/logger.py.
## Migrations - alembic
To create migration file:
```bash
poetry run alembic revision --autogenerate
```
To apply migrations:
```bash
poetry run alembic upgrade head
```
## Deploy - docker compose
To run both a Uvicorn server and a PostgreSQL database:
```bash
docker-compose up --build
```
## API Docs
The app also includes autogenerated documentation at http://exapmle-of-your-host/docs, where you can view the API.
